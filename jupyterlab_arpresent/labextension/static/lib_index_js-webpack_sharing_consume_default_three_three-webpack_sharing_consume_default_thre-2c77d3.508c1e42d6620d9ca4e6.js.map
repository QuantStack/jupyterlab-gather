{"version":3,"file":"lib_index_js-webpack_sharing_consume_default_three_three-webpack_sharing_consume_default_thre-2c77d3.508c1e42d6620d9ca4e6.js","mappings":"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","sources":["webpack://jupyterlab_arpresent/./src/arCube.ts","webpack://jupyterlab_arpresent/./src/arCubePlugin.ts","webpack://jupyterlab_arpresent/./src/components/ControlBar.tsx","webpack://jupyterlab_arpresent/./src/components/Icons.tsx","webpack://jupyterlab_arpresent/./src/components/JoinForm.tsx","webpack://jupyterlab_arpresent/./src/components/ModelListItem.tsx","webpack://jupyterlab_arpresent/./src/components/Peer.tsx","webpack://jupyterlab_arpresent/./src/components/PluginButton.tsx","webpack://jupyterlab_arpresent/./src/components/RaiseHand.tsx","webpack://jupyterlab_arpresent/./src/components/RootDisplay.tsx","webpack://jupyterlab_arpresent/./src/hms.ts","webpack://jupyterlab_arpresent/./src/icons.ts","webpack://jupyterlab_arpresent/./src/index.ts","webpack://jupyterlab_arpresent/./src/layouts/GridView.tsx","webpack://jupyterlab_arpresent/./src/layouts/MainDisplay.tsx","webpack://jupyterlab_arpresent/./src/layouts/PeerSidePane.tsx","webpack://jupyterlab_arpresent/./src/layouts/PresenterView.tsx","webpack://jupyterlab_arpresent/./src/model-examples/models.ts","webpack://jupyterlab_arpresent/./src/registry.ts","webpack://jupyterlab_arpresent/./src/widgets/Sidebar.tsx"],"sourcesContent":["import {\n  selectAppData,\n  selectIsSomeoneScreenSharing\n} from '@100mslive/react-sdk';\n//@ts-expect-error AR.js doesn't have type definitions\nimport * as THREEx from '@ar-js-org/ar.js/three.js/build/ar-threex.js';\nimport * as THREE from 'three';\nimport { GLTF, GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport { hmsActions, hmsStore } from './hms';\nimport { IModelRegistryData } from './registry';\nconst FIRST_SCENE = 0;\nconst SECOND_SCENE = 1;\n\nclass ArCube {\n  sceneGroup2: THREE.Group<THREE.Object3DEventMap>;\n  gltfModel2: THREE.Group<THREE.Object3DEventMap>;\n  /**\n   * Construct a new arpresent widget.\n   */\n  constructor(node: HTMLElement) {\n    this.initialize();\n    // this.animate();\n    // window.addEventListener('markerFound', () => {\n    //   console.log('Marker found');\n    // });\n\n    // window.addEventListener('markerLost', () => {\n    //   console.log('Marker lost');\n    // });\n  }\n\n  clock: THREE.Clock;\n  scene: THREE.Scene;\n  camera: THREE.Camera;\n  arToolkitSource: any;\n  arToolkitContext: any;\n  markerRootArray: THREE.Group[];\n  markerGroupArray: THREE.Group[];\n  hiroRootArray: THREE.Group[];\n  hiroGroupArray: THREE.Group[];\n  patternArray: string[];\n  patternArraySecondModel: string[];\n  // sceneGroup: THREE.Group;\n  // sceneGroupArray: THREE.Group[];\n  // edgeGroup: THREE.Group;\n  gltfLoader: GLTFLoader;\n  // gltfModel: THREE.Group;\n  animations: THREE.AnimationClip[] | undefined;\n  mixer: THREE.AnimationMixer;\n  renderer: THREE.WebGLRenderer;\n  mixerUpdateDelta: number;\n  // observer: IntersectionObserver;\n  existingWebcam: HTMLVideoElement | null;\n  newWebcam: HTMLVideoElement | undefined;\n  webcam_loaded: Promise<void>;\n  resolve: any;\n  deltaTime: number;\n  totalTime: number;\n  // readonly markerControls: any;\n  // readonly ambientLight: THREE.AmbientLight;\n  // readonly rotationArray: THREE.Vector3[];\n  // readonly markerRoot: THREE.Group;\n  // readonly markerGroup: THREE.Group;\n  // readonly pointLight: THREE.PointLight;\n  // readonly loader: THREE.TextureLoader;\n  // readonly stageMesh: THREE.MeshBasicMaterial;\n  // readonly stage: THREE.Mesh;\n  // readonly edgeGeometry: THREE.CylinderGeometry;\n  // readonly edgeCenters: THREE.Vector3[];\n  // readonly edgeRotations: THREE.Vector3[];\n  okToLoadModel: boolean;\n  // readonly animationRequestId: number | undefined;\n  // readonly now: number;\n  // readonly then: number;\n  // readonly elapsed: number;\n  // readonly fpsInterval: number;\n  //   readonly webcamFromArjs: HTMLElement | null;\n  // readonly node: HTMLElement;\n  renderTarget: THREE.WebGLRenderTarget;\n  // model: IModelRegistryData;\n  sceneGroups: THREE.Group[];\n  isSecondScene: boolean;\n\n  initialize() {\n    this.sceneGroups = [];\n\n    this.setupThreeStuff();\n\n    this.setupSource();\n\n    this.setupContext();\n\n    this.setupMarkerRoots();\n\n    this.setupScene(FIRST_SCENE);\n    // this.setupScene(1);\n  }\n\n  setupThreeStuff() {\n    console.log('setting up threee stuff');\n\n    this.okToLoadModel = true;\n    this.scene = new THREE.Scene();\n\n    // promise to track if AR.js has loaded the webcam\n    this.webcam_loaded = new Promise(resolve => {\n      this.resolve = resolve;\n    });\n\n    window.addEventListener('arjs-video-loaded', (e: any) => {\n      e.detail.component.style.display = 'none';\n      this.resolve();\n    });\n\n    const ambientLight = new THREE.AmbientLight(0xffffff, 1);\n    this.scene.add(ambientLight);\n\n    this.camera = new THREE.Camera();\n    this.scene.add(this.camera);\n\n    // Camera lights\n    const camLight = new THREE.DirectionalLight(0xffffff, 1);\n    camLight.position.set(-1, 2, 4);\n    this.camera.add(camLight);\n\n    // const canvas = document.getElementById('target') as HTMLCanvasElement;\n\n    // const offscreen = canvas?.transferControlToOffscreen();\n    // if (!canvas?.transferControlToOffscreen) {\n    //   console.log('no support');\n    // }\n\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: true,\n      alpha: true,\n      // canvas: canvas,\n      preserveDrawingBuffer: true,\n      premultipliedAlpha: false\n    });\n\n    this.renderer.setClearColor(new THREE.Color('lightgrey'), 0);\n\n    //Not render target things\n    const isScreenShareOn = hmsStore.getState(selectIsSomeoneScreenSharing); //useHMSStore(selectIsSomeoneScreenSharing);\n\n    if (isScreenShareOn) {\n      console.log('iffing');\n      const container = document.getElementById('screen-share-container');\n      container?.appendChild(this.renderer.domElement);\n    } else {\n      // Renderer target things\n      console.log('elsing');\n      this.renderTarget = new THREE.WebGLRenderTarget();\n      this.renderTarget.setSize(1280, 720);\n      this.renderer.setRenderTarget(this.renderTarget);\n    }\n\n    // this.renderer.setSize(1280, 720, false);\n    // this.renderer.domElement.style.position = 'absolute';\n\n    // this.renderer.domElement.style.top = '0px';\n    // this.renderer.domElement.style.left = '0px';\n\n    this.clock = new THREE.Clock();\n    this.deltaTime = 0;\n    this.totalTime = 0;\n\n    hmsActions.setAppData('renderer', this.renderer);\n  }\n\n  setupSource() {\n    console.log('setting up source');\n\n    this.arToolkitSource = new THREEx.ArToolkitSource({\n      sourceType: 'webcam'\n    });\n\n    this.arToolkitSource.init();\n  }\n\n  setupContext() {\n    console.log('setting up context');\n\n    // create atToolkitContext\n    this.arToolkitContext = new THREEx.ArToolkitContext({\n      cameraParametersUrl:\n        THREEx.ArToolkitContext.baseURL + '../data/data/camera_para.dat',\n      detectionMode: 'mono'\n    });\n\n    // copy projection matrix to camera when initialization complete\n    this.arToolkitContext.init(() => {\n      this.camera.projectionMatrix.copy(\n        this.arToolkitContext.getProjectionMatrix()\n      );\n    });\n  }\n\n  setupMarkerRoots() {\n    console.log('setting up marker roots');\n\n    this.markerRootArray = [];\n    this.markerGroupArray = [];\n\n    this.hiroRootArray = [];\n    this.hiroGroupArray = [];\n\n    this.patternArray = [\n      'letterA',\n      'letterB',\n      'letterC',\n      'letterD',\n      'letterF',\n      'kanji'\n    ];\n\n    this.patternArraySecondModel = [\n      'letterJ',\n      'letterK',\n      'letterL',\n      'letterM',\n      'letterN',\n      'letterP'\n    ];\n\n    const rotationArray = [\n      new THREE.Vector3(-Math.PI / 2, 0),\n      new THREE.Vector3(0, -Math.PI / 2, Math.PI / 2),\n      new THREE.Vector3(Math.PI / 2, 0, Math.PI),\n      new THREE.Vector3(-Math.PI / 2, Math.PI / 2, 0),\n      new THREE.Vector3(Math.PI, 0, 0),\n      new THREE.Vector3(0, 0, 0)\n    ];\n\n    for (let i = 0; i < 6; i++) {\n      const markerRoot = new THREE.Group();\n      this.markerRootArray.push(markerRoot);\n      this.scene.add(markerRoot);\n      const markerControls = new THREEx.ArMarkerControls(\n        this.arToolkitContext,\n        markerRoot,\n        {\n          type: 'pattern',\n          patternUrl:\n            THREEx.ArToolkitContext.baseURL +\n            'examples/marker-training/examples/pattern-files/pattern-' +\n            this.patternArray[i] +\n            '.patt'\n        }\n      );\n\n      const markerGroup = new THREE.Group();\n      this.markerGroupArray.push(markerGroup);\n      markerGroup.position.y = -1.25 / 2;\n      markerGroup.rotation.setFromVector3(rotationArray[i]);\n\n      markerRoot.add(markerGroup);\n    }\n\n    for (let i = 0; i < 6; i++) {\n      const hiroRoot = new THREE.Group();\n      this.hiroRootArray.push(hiroRoot);\n      this.scene.add(hiroRoot);\n      const hiroControls = new THREEx.ArMarkerControls(\n        this.arToolkitContext,\n        hiroRoot,\n        {\n          type: 'pattern',\n          patternUrl:\n            'https://raw.githubusercontent.com/gjmooney/jupyterlab-arpresent/main/pattern-files/pattern-' +\n            this.patternArraySecondModel[i] +\n            '.patt'\n        }\n      );\n\n      const hiroGroup = new THREE.Group();\n      this.hiroGroupArray.push(hiroGroup);\n      hiroGroup.position.y = -1.25 / 2;\n      hiroGroup.rotation.setFromVector3(rotationArray[i]);\n\n      hiroRoot.add(hiroGroup);\n    }\n  }\n\n  setupScene(sceneNumber: number) {\n    console.log('setting up scene');\n    const sceneGroup = new THREE.Group();\n    // a 1x1x1 cube model with scale factor 1.25 fills up the physical cube\n    sceneGroup.scale.set(1.75 / 2, 1.75 / 2, 1.75 / 2);\n    sceneGroup.name = `scene${sceneNumber}`;\n\n    // reversed cube\n    //TODO: Can probably just have one cube and add it to scenes as needed\n    sceneGroup.add(\n      new THREE.Mesh(\n        new THREE.BoxGeometry(2, 2, 2),\n        new THREE.MeshBasicMaterial({\n          color: '#2EEEFF',\n          side: THREE.BackSide\n        })\n      )\n    );\n\n    // cube edges\n    const edgeGroup = new THREE.Group();\n    const edgeGeometry = new THREE.CylinderGeometry(0.03, 0.03, 2, 32);\n\n    const edgeCenters = [\n      new THREE.Vector3(0, -1, -1),\n      new THREE.Vector3(0, 1, -1),\n      new THREE.Vector3(0, -1, 1),\n      new THREE.Vector3(0, 1, 1),\n      new THREE.Vector3(-1, 0, -1),\n      new THREE.Vector3(1, 0, -1),\n      new THREE.Vector3(-1, 0, 1),\n      new THREE.Vector3(1, 0, 1),\n      new THREE.Vector3(-1, -1, 0),\n      new THREE.Vector3(1, -1, 0),\n      new THREE.Vector3(-1, 1, 0),\n      new THREE.Vector3(1, 1, 0)\n    ];\n\n    const edgeRotations = [\n      new THREE.Vector3(0, 0, Math.PI / 2),\n      new THREE.Vector3(0, 0, Math.PI / 2),\n      new THREE.Vector3(0, 0, Math.PI / 2),\n      new THREE.Vector3(0, 0, Math.PI / 2),\n      new THREE.Vector3(0, 0, 0),\n      new THREE.Vector3(0, 0, 0),\n      new THREE.Vector3(0, 0, 0),\n      new THREE.Vector3(0, 0, 0),\n      new THREE.Vector3(Math.PI / 2, 0, 0),\n      new THREE.Vector3(Math.PI / 2, 0, 0),\n      new THREE.Vector3(Math.PI / 2, 0, 0),\n      new THREE.Vector3(Math.PI / 2, 0, 0)\n    ];\n\n    for (let i = 0; i < 12; i++) {\n      const edge = new THREE.Mesh(\n        edgeGeometry,\n        new THREE.MeshLambertMaterial({\n          color: '#262626'\n        })\n      );\n      edge.position.copy(edgeCenters[i]);\n      edge.rotation.setFromVector3(edgeRotations[i]);\n\n      edgeGroup.add(edge);\n    }\n\n    sceneGroup.add(edgeGroup);\n    this.sceneGroups.push(sceneGroup);\n\n    this.loadModel(sceneNumber);\n    console.log('fin');\n  }\n\n  loadModel(sceneNumber: number, modelName?: string) {\n    console.log('loading model');\n    if (!this.gltfLoader) {\n      this.gltfLoader = new GLTFLoader();\n    }\n\n    const model = this.findModelByName(modelName ? modelName : 'duck');\n\n    // remove old model first\n    // if (this.gltfModel) {\n    //   this.removeFromScene(sceneNumber, this.gltfModel);\n    // }\n\n    // load model\n    // eslint-disable-next-line no-constant-condition\n    if (true) {\n      this.okToLoadModel = false;\n      hmsActions.setAppData('canLoadModel', false);\n\n      if ('url' in model) {\n        this.gltfLoader.load(\n          model.url,\n          gltf => {\n            this.onSuccessfulLoad(gltf, sceneNumber);\n          },\n          () => {\n            console.log('model loading');\n          },\n          error => {\n            console.log('Error loading model url', error);\n          }\n        );\n      } else if ('gltf' in model) {\n        const data = JSON.stringify(model.gltf);\n        this.gltfLoader.parse(\n          data,\n          '',\n          gltf => {\n            this.onSuccessfulLoad(gltf, sceneNumber);\n          },\n          error => {\n            console.log('Error loading model gltf', error);\n          }\n        );\n      }\n    }\n  }\n\n  onSuccessfulLoad = (gltf: GLTF, sceneNumber: number) => {\n    console.log('on successful load');\n    const scale = 1.0;\n    const gltfModel = gltf.scene;\n    gltfModel.scale.set(scale, scale, scale);\n    gltfModel.position.fromArray([0, -1, 0]);\n\n    gltfModel.name = `model${sceneNumber}`;\n    this.animations = gltf.animations;\n    this.mixer = new THREE.AnimationMixer(gltfModel);\n\n    if (this.animations) {\n      this.animations.forEach(clip => {\n        this.mixer.clipAction(clip).play();\n      });\n    }\n\n    this.sceneGroups[sceneNumber].add(gltfModel);\n    this.okToLoadModel = true;\n    hmsActions.setAppData('canLoadModel', true);\n    console.log('model loaded parse');\n  };\n\n  findModelByName(name: string) {\n    const modelRegistry = hmsStore.getState(selectAppData('modelRegistry'));\n\n    return modelRegistry.find(\n      (model: IModelRegistryData) => model.name === name\n    );\n  }\n\n  changeModelInScene(sceneNumber: number, modelName: string) {\n    const sceneGroup = this.sceneGroups[sceneNumber];\n    const modelToRemove = sceneGroup.getObjectByName(`model${sceneNumber}`);\n\n    if (modelToRemove) {\n      sceneGroup.remove(modelToRemove);\n    }\n\n    this.loadModel(sceneNumber, modelName);\n  }\n\n  removeFromScene(sceneNumber: number, object3d: THREE.Object3D) {\n    this.sceneGroups[sceneNumber].remove(object3d);\n  }\n\n  enableSecondScene() {\n    console.log('enaling');\n    this.isSecondScene = true;\n    this.setupScene(SECOND_SCENE);\n  }\n\n  disableSecondScene() {\n    console.log('disabling');\n    this.isSecondScene = false;\n    //TODO this won't work with more than two scenes but it's fine for now\n    this.sceneGroups.pop();\n  }\n\n  resizeCanvasToDisplaySize() {\n    const canvas = this.renderer.domElement;\n    // look up the size the canvas is being displayed\n    const width = canvas.clientWidth;\n    const height = canvas.clientHeight;\n    // console.log('canvas.width in resize', canvas.width);\n    // console.log('width in resize', width);\n    // adjust displayBuffer size to match\n    if (canvas.width !== width || canvas.height !== height) {\n      // you must pass false here or three.js sadly fights the browser\n      this.renderer.setSize(width, height, false);\n      // this.camera.aspect = width / height;\n      // this.camera.updateProjectionMatrix();\n\n      // update any render target sizes here\n    }\n  }\n\n  render() {\n    // this.renderer.setRenderTarget(this.renderTarget);\n    // this.renderer.render(this.scene, this.camera);\n    // this.renderer.setRenderTarget(null);\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  animate() {\n    window.requestAnimationFrame(this.animate.bind(this));\n\n    this.deltaTime = this.clock.getDelta();\n    this.totalTime += this.deltaTime;\n\n    this.update();\n\n    if (this.mixer) {\n      this.mixerUpdateDelta = this.clock.getDelta();\n      this.mixer.update(this.mixerUpdateDelta);\n    }\n\n    this.render();\n  }\n\n  update() {\n    // update artoolkit on every frame\n    if (this.arToolkitSource.ready !== false) {\n      this.arToolkitContext.update(this.arToolkitSource.domElement);\n    }\n\n    // console.log('root array', this.markerRootArray);\n\n    for (let i = 0; i < 6; i++) {\n      if (this.markerRootArray[i].visible) {\n        //TODO want to iterate through new scene group list\n        this.markerGroupArray[i].add(this.sceneGroups[0]);\n        // console.log('visible: ' + this.patternArray[i]);\n        break;\n      }\n    }\n\n    if (this.isSecondScene) {\n      for (let i = 0; i < 6; i++) {\n        if (this.hiroRootArray[i].visible) {\n          //TODO want to iterate through new scene group list\n          this.hiroGroupArray[i].add(this.sceneGroups[1]);\n          // console.log('visible: ' + this.patternArraySecondModel[i - 6]);\n          break;\n        }\n      }\n    }\n  }\n}\n\nexport default ArCube;\n","import {\n  HMSPluginSupportResult,\n  HMSVideoPlugin,\n  HMSVideoPluginCanvasContextType,\n  HMSVideoPluginType,\n  selectAppData\n} from '@100mslive/hms-video-store';\nimport * as THREE from 'three';\nimport ArCube from './arCube';\nimport { hmsActions, hmsStore } from './hms';\n\nclass ArCubePlugin implements HMSVideoPlugin {\n  input: HTMLCanvasElement | null;\n  output: HTMLCanvasElement | null;\n  // arCube: ArCube;\n  node: HTMLElement;\n  renderer: THREE.WebGLRenderer;\n  arCube: ArCube;\n  //   outputCtx: CanvasRenderingContext2D | null;\n\n  constructor() {\n    // this.outputCtx = null;\n    this.input = null;\n    this.output = null;\n  }\n\n  blendImages(imageDataBottom: ImageData, imageDataTop: ImageData) {\n    // Ensure the dimensions of both ImageData objects are the same\n    if (\n      imageDataBottom.width !== imageDataTop.width ||\n      imageDataBottom.height !== imageDataTop.height\n    ) {\n      throw new Error('ImageData dimensions must match');\n    }\n\n    // Create a new ImageData object for the blended image\n    const blendedImageData = new ImageData(\n      imageDataBottom.width,\n      imageDataBottom.height\n    );\n\n    // Blend pixel data from both ImageData objects\n    for (let i = 0; i < blendedImageData.data.length; i += 4) {\n      // Combine pixel values from both images using alpha blending\n      const alphaTop = imageDataTop.data[i + 3] / 255; // Alpha value of the top image\n      const alphaBottom = 1 - alphaTop; // Alpha value of the bottom image\n\n      // Blend RGB channels\n      blendedImageData.data[i] =\n        imageDataBottom.data[i] * alphaBottom + imageDataTop.data[i] * alphaTop;\n      blendedImageData.data[i + 1] =\n        imageDataBottom.data[i + 1] * alphaBottom +\n        imageDataTop.data[i + 1] * alphaTop;\n      blendedImageData.data[i + 2] =\n        imageDataBottom.data[i + 2] * alphaBottom +\n        imageDataTop.data[i + 2] * alphaTop;\n\n      // Preserve alpha channel\n      blendedImageData.data[i + 3] = 255; // Fully opaque\n    }\n\n    return blendedImageData;\n  }\n\n  flipImageDataVertically(imageData: ImageData) {\n    const width = imageData.width;\n    const height = imageData.height;\n    const flippedData = new Uint8ClampedArray(width * height * 4);\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        const sourceIndex = (y * width + x) * 4;\n        const destIndex = ((height - y - 1) * width + x) * 4;\n\n        flippedData[destIndex] = imageData.data[sourceIndex];\n        flippedData[destIndex + 1] = imageData.data[sourceIndex + 1];\n        flippedData[destIndex + 2] = imageData.data[sourceIndex + 2];\n        flippedData[destIndex + 3] = imageData.data[sourceIndex + 3];\n      }\n    }\n\n    return new ImageData(flippedData, width, height);\n  }\n\n  /**\n   * @param input {HTMLCanvasElement}\n   * @param output {HTMLCanvasElement}\n   */\n  processVideoFrame(input: HTMLCanvasElement, output: HTMLCanvasElement) {\n    if (!input || !output) {\n      throw new Error('Plugin invalid input/output');\n    }\n\n    this.input = input;\n    this.output = output;\n\n    // we don't want to change the dimensions so set the same width, height\n    const width = input.width;\n    const height = input.height;\n    output.width = width;\n    output.height = height;\n\n    const threeJsContext = this.arCube.renderer.getContext();\n\n    const inputCtx = input.getContext('2d');\n    const inputImgData = inputCtx?.getImageData(0, 0, width, height);\n\n    const pixels = new Uint8Array(width * height * 4);\n\n    this.arCube.renderer.readRenderTargetPixels(\n      this.arCube.renderTarget,\n      0,\n      0,\n      width,\n      height,\n      pixels\n    );\n\n    // threeJsContext?.readPixels(\n    //   0,\n    //   0,\n    //   width,\n    //   height,\n    //   threeJsContext.RGBA,\n    //   threeJsContext.UNSIGNED_BYTE,\n    //   pixels\n    // );\n\n    const threeImageData = new ImageData(\n      new Uint8ClampedArray(pixels),\n      width,\n      height\n    );\n\n    const outputCtx = output.getContext('2d');\n\n    if (!inputImgData) {\n      console.log('no image input data');\n    }\n    const flippedImage = this.flipImageDataVertically(threeImageData);\n    const blendedData = this.blendImages(inputImgData!, flippedImage);\n    outputCtx?.putImageData(blendedData, 0, 0);\n  }\n\n  getName() {\n    return 'arcube-plugin';\n  }\n\n  /**\n   * @deprecated\n   */\n  isSupported(): boolean {\n    return true;\n  }\n\n  checkSupport() {\n    // we're not doing anything complicated, it's supported on all browsers\n    const browserResult = {} as HMSPluginSupportResult;\n    browserResult.isSupported = true;\n    return browserResult;\n  }\n\n  async init() {\n    this.node = hmsStore.getState(selectAppData('node'));\n    this.arCube = new ArCube(this.node);\n    hmsActions.setAppData('arCube', this.arCube);\n\n    this.arCube.animate();\n  }\n\n  getPluginType() {\n    return HMSVideoPluginType.TRANSFORM; // because we transform the image\n  }\n\n  getContextType() {\n    return HMSVideoPluginCanvasContextType['2D'];\n  }\n\n  stop() {} // placeholder, nothing to stop\n}\n\nexport default ArCubePlugin;\n","import { useAVToggle, useHMSActions } from '@100mslive/react-sdk';\nimport React from 'react';\nimport PluginButton from './PluginButton';\nimport RaiseHand from './RaiseHand';\n\nconst ControlBar = () => {\n  const hmsActions = useHMSActions();\n  const { isLocalAudioEnabled, isLocalVideoEnabled, toggleAudio, toggleVideo } =\n    useAVToggle();\n\n  return (\n    <div className=\"control-bar\">\n      <button className=\"btn-control\" onClick={toggleAudio}>\n        {isLocalAudioEnabled ? 'Mute' : 'Unmute'}\n      </button>\n      <button className=\"btn-control\" onClick={toggleVideo}>\n        {isLocalVideoEnabled ? 'Hide' : 'Unhide'}\n      </button>\n\n      {/* <ScreenShareButton /> */}\n      <PluginButton />\n      <RaiseHand />\n      <button\n        id=\"leave-btn\"\n        className=\"btn-danger\"\n        onClick={() => hmsActions.leave()}\n      >\n        Leave Room\n      </button>\n    </div>\n  );\n};\n\nexport default ControlBar;\n","import { LabIcon } from '@jupyterlab/ui-components';\nimport React from 'react';\nimport duckLogo from '../../icons/duckduck.svg';\n\ninterface IIcons {\n  className?: string;\n}\n\nexport const Icons = {\n  raisedHand: ({ className }: IIcons) => (\n    <svg\n      className={className}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 512 512\"\n    >\n      <path d=\"M256 0c-25.3 0-47.2 14.7-57.6 36c-7-2.6-14.5-4-22.4-4c-35.3 0-64 28.7-64 64V261.5l-2.7-2.7c-25-25-65.5-25-90.5 0s-25 65.5 0 90.5L106.5 437c48 48 113.1 75 181 75H296h8c1.5 0 3-.1 4.5-.4c91.7-6.2 165-79.4 171.1-171.1c.3-1.5 .4-3 .4-4.5V160c0-35.3-28.7-64-64-64c-5.5 0-10.9 .7-16 2V96c0-35.3-28.7-64-64-64c-7.9 0-15.4 1.4-22.4 4C303.2 14.7 281.3 0 256 0zM240 96.1c0 0 0-.1 0-.1V64c0-8.8 7.2-16 16-16s16 7.2 16 16V95.9c0 0 0 .1 0 .1V232c0 13.3 10.7 24 24 24s24-10.7 24-24V96c0 0 0 0 0-.1c0-8.8 7.2-16 16-16s16 7.2 16 16v55.9c0 0 0 .1 0 .1v80c0 13.3 10.7 24 24 24s24-10.7 24-24V160.1c0 0 0-.1 0-.1c0-8.8 7.2-16 16-16s16 7.2 16 16V332.9c-.1 .6-.1 1.3-.2 1.9c-3.4 69.7-59.3 125.6-129 129c-.6 0-1.3 .1-1.9 .2H296h-8.5c-55.2 0-108.1-21.9-147.1-60.9L52.7 315.3c-6.2-6.2-6.2-16.4 0-22.6s16.4-6.2 22.6 0L119 336.4c6.9 6.9 17.2 8.9 26.2 5.2s14.8-12.5 14.8-22.2V96c0-8.8 7.2-16 16-16c8.8 0 16 7.1 16 15.9V232c0 13.3 10.7 24 24 24s24-10.7 24-24V96.1z\" />\n    </svg>\n  ),\n  spinner: ({ className }: IIcons) => (\n    <svg\n      className={className}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 512 512\"\n    >\n      <path d=\"M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z\" />\n    </svg>\n  )\n};\n\nexport const LogoIcon = new LabIcon({\n  name: 'arpresent:icon_logo',\n  svgstr: duckLogo\n});\n","import { useHMSActions } from '@100mslive/react-sdk';\nimport React, { useState } from 'react';\n\nconst Join = () => {\n  const hmsActions = useHMSActions();\n  const [inputValues, setInputValues] = useState({\n    userName: 'we',\n    roomCode: 'ibj-yxje-nda'\n  });\n\n  const handleInputChange = (e: any) => {\n    setInputValues(prevValues => ({\n      ...prevValues,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleSubmit = async (e: any) => {\n    console.log('clicking join');\n    e.preventDefault();\n    const { userName = '', roomCode = '' } = inputValues;\n\n    // use room code to fetch auth token\n    const authToken = await hmsActions.getAuthTokenByRoomCode({ roomCode });\n\n    try {\n      await hmsActions.join({\n        userName,\n        authToken,\n        settings: {\n          isAudioMuted: true,\n          isVideoMuted: false\n        }\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <h2>Join Room</h2>\n      <div className=\"join-form-input\">\n        <label htmlFor=\"userName\">Username</label>\n        <input\n          required\n          value={inputValues.userName}\n          onChange={handleInputChange}\n          id=\"userName\"\n          type=\"text\"\n          name=\"userName\"\n          placeholder=\"Your name\"\n        />\n      </div>\n      <div className=\"join-form-input\">\n        <label htmlFor=\"room-code\">Room ID</label>\n        <input\n          id=\"room-code\"\n          type=\"text\"\n          name=\"roomCode\"\n          placeholder=\"Room code\"\n          onChange={handleInputChange}\n          value={inputValues.roomCode}\n        />\n      </div>\n      <button className=\"btn-primary\">Join</button>\n    </form>\n  );\n};\n\nexport default Join;\n","import { Button } from '@jupyterlab/ui-components';\nimport React from 'react';\nimport { IModelRegistryData } from '../registry';\n\ninterface IModelListItem {\n  model: IModelRegistryData;\n  handleClick: (model: IModelRegistryData) => void;\n  className?: string;\n}\n\nconst ModelListItem = ({ model, handleClick, className }: IModelListItem) => {\n  return (\n    <Button\n      minimal\n      className={`${className} model-list-item`}\n      onClick={() => handleClick(model)}\n    >\n      {model.name}\n    </Button>\n  );\n};\n\nexport default ModelListItem;\n","import { HMSPeer, useVideo } from '@100mslive/react-sdk';\nimport React, { useEffect } from 'react';\nimport { Icons } from './Icons';\n\ninterface IPeer {\n  peer: HMSPeer;\n  className: string;\n}\n\nconst Peer = ({ peer, className }: IPeer) => {\n  // TODO: Use peer id instead of Peer\n  const { videoRef } = useVideo({\n    trackId: peer.videoTrack\n  });\n\n  return (\n    <div className={'peer-tile'}>\n      {peer.isHandRaised ? (\n        <Icons.raisedHand className=\"peer-hand-raised-icon\" />\n      ) : (\n        ''\n      )}\n      <video\n        ref={videoRef}\n        className={`${className} ${peer.isHandRaised ? 'peer-hand-raised' : ''}`}\n        autoPlay\n        muted\n        playsInline\n      />\n      <div className=\"peer-name\">\n        {peer.name} {peer.isLocal ? '(You)' : ''}\n      </div>\n    </div>\n  );\n};\n\nexport default Peer;\n","import {\n  selectAppData,\n  selectIsLocalVideoPluginPresent,\n  selectLocalPeer,\n  useHMSActions,\n  useHMSStore\n} from '@100mslive/react-sdk';\nimport React from 'react';\nimport ArCubePlugin from '../arCubePlugin';\n\nconst PluginButton = () => {\n  const hmsActions = useHMSActions();\n  const localPeer = useHMSStore(selectLocalPeer);\n  const isPresenting = useHMSStore(selectAppData('isPresenting'));\n\n  const arPlugin = new ArCubePlugin();\n\n  const isPluginLoaded = useHMSStore(\n    selectIsLocalVideoPluginPresent(arPlugin.getName())\n  );\n\n  const togglePlugin = async () => {\n    // don't load plugin locally if someone else is presenting\n    if (!isPluginLoaded && !isPresenting) {\n      console.log('adding');\n      hmsActions.sessionStore.set('isPresenting', true);\n      hmsActions.sessionStore.set('presenterId', localPeer);\n\n      await hmsActions.addPluginToVideoTrack(arPlugin);\n    } else {\n      console.log('removing');\n      hmsActions.sessionStore.set('isPresenting', false);\n      hmsActions.sessionStore.set('presenterId', '');\n\n      await hmsActions.removePluginFromVideoTrack(arPlugin);\n    }\n  };\n\n  return (\n    <button className=\"btn-control\" onClick={togglePlugin}>\n      {isPluginLoaded ? 'Stop AR' : 'Start AR'}\n    </button>\n  );\n};\n\nexport default PluginButton;\n","import {\n  selectHasPeerHandRaised,\n  selectLocalPeerID,\n  useHMSActions,\n  useHMSStore\n} from '@100mslive/react-sdk';\nimport React, { useCallback } from 'react';\nimport { Icons } from './Icons';\n\nconst RaiseHand = () => {\n  const localPeerId = useHMSStore(selectLocalPeerID);\n  const isHandRaised = useHMSStore(selectHasPeerHandRaised(localPeerId));\n  const hmsActions = useHMSActions();\n\n  const toggleRaiseHand = useCallback(async () => {\n    if (isHandRaised) {\n      await hmsActions.lowerLocalPeerHand();\n    } else {\n      await hmsActions.raiseLocalPeerHand();\n    }\n  }, [hmsActions, isHandRaised]);\n\n  return (\n    <button className=\"btn-control\" onClick={toggleRaiseHand}>\n      <div className={`icon ${isHandRaised ? 'icon-breathe' : ''}`}>\n        <Icons.raisedHand />\n      </div>{' '}\n      {/* {isHandRaised ? 'Lower Hand' : 'Raise Hand'} */}\n    </button>\n  );\n};\n\nexport default RaiseHand;\n","import { ReactWidget } from '@jupyterlab/ui-components';\nimport { ISignal } from '@lumino/signaling';\nimport React, { useEffect, useRef } from 'react';\nimport { TypedHMSRoomProvider, hmsActions } from '../hms';\nimport { MainDisplay } from '../layouts/MainDisplay';\nimport { IModelRegistry, IModelRegistryData } from '../registry';\n\ninterface IRootDisplayProps {\n  node: HTMLElement;\n  modelList: Set<IModelRegistryData>;\n  modelRegistryChanged: ISignal<IModelRegistry, void>;\n}\n\nconst RootDisplay = ({\n  node,\n  modelList,\n  modelRegistryChanged\n}: IRootDisplayProps) => {\n  const childRef = useRef(null);\n  // const hmsActions = useHMSActions();\n\n  useEffect(() => {\n    modelRegistryChanged.connect(() => {\n      hmsActions.setAppData('modelRegistry', [...modelList]);\n      console.log('modelList in root', modelList);\n    });\n  }, []);\n\n  // TODO: Replace this with session store?\n  useEffect(() => {\n    const initialAppData = {\n      node: node,\n      canLoadModel: true,\n      modelRegistry: [...modelList],\n      isPresenting: false,\n      presenterId: '',\n      selectedModel: null\n    };\n\n    hmsActions.initAppData(initialAppData);\n  }, [hmsActions]);\n\n  // TODO: There's probably a better way to do this\n  // add overflow: auto to parent container\n  useEffect(() => {\n    if (childRef.current) {\n      const parent = (childRef.current as HTMLElement).parentElement;\n      parent?.classList.add('overflow');\n    }\n  }, [childRef]);\n\n  return (\n    <div ref={childRef} className=\"Root\">\n      <MainDisplay />\n    </div>\n  );\n};\n\nexport class RootDisplayWidget extends ReactWidget {\n  private _modelList: Set<IModelRegistryData>;\n  private _modelRegistryChanged: ISignal<IModelRegistry, void>;\n\n  constructor(\n    modelList: Set<IModelRegistryData>,\n    modelRegistryChanged: ISignal<IModelRegistry, void>\n  ) {\n    super();\n    this._modelList = modelList;\n    this._modelRegistryChanged = modelRegistryChanged;\n  }\n\n  render() {\n    return (\n      <TypedHMSRoomProvider>\n        <RootDisplay\n          node={this.node}\n          modelList={this._modelList}\n          modelRegistryChanged={this._modelRegistryChanged}\n        />\n      </TypedHMSRoomProvider>\n    );\n  }\n}\n","import { HMSLogLevel, HMSReactiveStore } from '@100mslive/hms-video-store';\nimport { HMSPeer, HMSRoomProvider } from '@100mslive/react-sdk';\nimport { IModelRegistryData } from './registry';\n\ninterface ISessionStore {\n  presenterId: HMSPeer;\n  isPresenting: boolean;\n  node: HTMLElement;\n  canLoadModel: boolean;\n  modelRegistry: IModelRegistryData[];\n  selectedModel: IModelRegistryData;\n}\nconst hmsManager = new HMSReactiveStore<{ sessionStore: ISessionStore }>();\n\nconst TypedHMSRoomProvider = HMSRoomProvider<{\n  sessionStore: ISessionStore;\n}>;\n\nhmsManager.triggerOnSubscribe();\n\nconst hmsStore = hmsManager.getStore();\nconst hmsActions = hmsManager.getActions();\nhmsActions.setLogLevel(HMSLogLevel.WARN);\n\nexport { TypedHMSRoomProvider, hmsActions, hmsStore };\n","/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n// This file is based on iconimports.ts in @jupyterlab/ui-components, but is manually generated.\n\nimport { LabIcon } from '@jupyterlab/ui-components';\n\nimport arSvgStr from '../style/icons/ar.svg';\n\nexport const arIcon = new LabIcon({\n  name: 'jupyterlab-ar::ar',\n  svgstr: arSvgStr\n});\n","import {\n  ILayoutRestorer,\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport { ICommandPalette, MainAreaWidget } from '@jupyterlab/apputils';\nimport { ILauncher } from '@jupyterlab/launcher';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { LogoIcon } from './components/Icons';\nimport { RootDisplayWidget } from './components/RootDisplay';\nimport { threeCube } from './model-examples/models';\nimport {\n  IArPresentRegistryToken,\n  IModelRegistry,\n  ModelManager\n} from './registry';\nimport { SidebarWidget } from './widgets/Sidebar';\nexport { IArPresentRegistryToken, IModelRegistry };\n\n/**\n * Initialization data for the jupyterlab_arpresent extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'jupyterlab_arpresent',\n  description: 'Video presentation over WebRTC with AR capabilities.',\n  autoStart: true,\n  requires: [ICommandPalette, ILauncher, IArPresentRegistryToken],\n  optional: [ILayoutRestorer, ISettingRegistry],\n  activate: (\n    app: JupyterFrontEnd,\n    palette: ICommandPalette,\n    launcher: ILauncher | null,\n    registry: IModelRegistry,\n    settingRegistry: ISettingRegistry | null,\n    restorer: ILayoutRestorer | null\n  ) => {\n    console.log('JupyterLab extension jupyterlab_arpresent is activated!');\n\n    // Register default models\n    registry.registerModel({\n      name: 'duck',\n      url: 'https://github.khronos.org/glTF-Sample-Viewer-Release/assets/models/Models/Duck/glTF/Duck.gltf'\n    });\n\n    registry.registerModel({\n      name: 'brain stem',\n      url: 'https://github.khronos.org/glTF-Sample-Viewer-Release/assets/models/Models/BrainStem/glTF/BrainStem.gltf'\n    });\n\n    let widget: MainAreaWidget<RootDisplayWidget>;\n\n    const sidebarPanel = new SidebarWidget(\n      registry.modelRegistry,\n      registry.modelRegistryChanged\n    );\n    sidebarPanel.id = 'AR-sidepanel';\n\n    // Add an application command\n    const arPresentCommand: string = 'arpresent:open';\n    app.commands.addCommand(arPresentCommand, {\n      label: 'AR Presentation',\n      icon: LogoIcon,\n      execute: () => {\n        // Regenerate the widget if disposed\n        if (!widget || widget.isDisposed) {\n          const content = new RootDisplayWidget(\n            registry.modelRegistry,\n            registry.modelRegistryChanged\n          );\n          widget = new MainAreaWidget({ content });\n          widget.id = 'arpresent-jupyterlab';\n          widget.title.label = 'AR Presentation';\n          widget.title.closable = true;\n          widget.title.icon = LogoIcon;\n        }\n        // if (!tracker.has(widget)) {\n        //   // Track the state of the widget for later restoration\n        //   tracker.add(widget);\n        // }\n        if (!widget.isAttached) {\n          // Attach the widget to the main work area if it's not there\n          app.shell.add(widget, 'main');\n        }\n\n        // Activate the widget\n        app.shell.activateById(widget.id);\n        app.shell.add(widget, 'main');\n        app.shell.add(sidebarPanel, 'left', { rank: 2000 });\n      }\n    });\n\n    // Add the command to the palette.\n    palette.addItem({ command: arPresentCommand, category: 'Video Chat' });\n\n    if (launcher) {\n      launcher.add({\n        command: arPresentCommand,\n        category: 'Video Chat',\n        rank: 2\n      });\n    }\n\n    // Track and restore the widget state\n    // const tracker = new WidgetTracker<MainAreaWidget<ArPresent>>({\n    //   namespace: 'arpresent'\n    // });\n    // if (restorer) {\n    //   restorer.restore(tracker, {\n    //     command,\n    //     name: () => 'arpresent'\n    //   });\n    // }\n  }\n};\n\nconst modelRegistryPlugin: JupyterFrontEndPlugin<IModelRegistry> = {\n  id: 'jupyterlab_arpresent:registry',\n  description: 'Registry of available models to display in ar present',\n  autoStart: true,\n  requires: [],\n  provides: IArPresentRegistryToken,\n  activate: () => {\n    const modelRegistryManager = new ModelManager();\n\n    return modelRegistryManager;\n  }\n};\n\nconst duckPlugin: JupyterFrontEndPlugin<void> = {\n  id: 'jupyterlab_duck',\n  description: 'a duck.',\n  autoStart: true,\n  requires: [ICommandPalette, IArPresentRegistryToken],\n  activate: (\n    app: JupyterFrontEnd,\n    palette: ICommandPalette,\n    registry: IModelRegistry\n  ) => {\n    console.log('JupyterLab extension The Duck is activated!');\n\n    const duckPluginCommand: string = 'duckPlugin:open';\n    app.commands.addCommand(duckPluginCommand, {\n      label: 'The Duck',\n      execute: () => {\n        console.log('executing the duck');\n        // const data = JSON.stringify(threeCube);\n        // const data = JSON.parse(threeCube);\n        const data = threeCube;\n        registry.registerModel({\n          name: 'Three Cube',\n          gltf: data\n        });\n      }\n    });\n\n    palette.addItem({ command: duckPluginCommand, category: 'Video Chat' });\n  }\n};\n\nexport default [plugin, modelRegistryPlugin, duckPlugin];\n","import { selectPeers, useHMSStore } from '@100mslive/react-sdk';\nimport React from 'react';\nimport Peer from '../components/Peer';\n\nconst GridView = () => {\n  const peers = useHMSStore(selectPeers);\n  // const isScreenShareOn = useHMSStore(selectIsSomeoneScreenSharing);\n\n  // const limitMaxTiles = 20;\n\n  return (\n    <div className=\"main-grid-container\">\n      <div className=\"main-grid-view\">\n        {peers.map(peer => (\n          <Peer\n            key={peer.id}\n            peer={peer}\n            className={`peer-video ${peer.isLocal ? 'local' : ''}`}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default GridView;\n","import {\n  selectIsConnectedToRoom,\n  selectSessionStore,\n  useHMSActions,\n  useHMSStore\n} from '@100mslive/react-sdk';\nimport React, { useEffect } from 'react';\n\nimport ControlBar from '../components/ControlBar';\nimport JoinForm from '../components/JoinForm';\nimport GridView from './GridView';\nimport PresenterView from './PresenterView';\n\nexport const MainDisplay = () => {\n  const isConnected = useHMSStore(selectIsConnectedToRoom);\n  const hmsActions = useHMSActions();\n  const isPresenting = useHMSStore(selectSessionStore('isPresenting'));\n  const presenterId = useHMSStore(selectSessionStore('presenterId'));\n\n  useEffect(() => {\n    if (isConnected) {\n      hmsActions.sessionStore.observe('isPresenting');\n      hmsActions.sessionStore.observe('presenterId');\n    }\n\n    window.onunload = () => {\n      if (isConnected) {\n        hmsActions.sessionStore.set('isPresenting');\n        hmsActions.sessionStore.set('presenterId');\n        hmsActions.leave();\n      }\n    };\n  }, [hmsActions, isConnected]);\n\n  let ViewComponent;\n  if (isPresenting) {\n    ViewComponent = PresenterView;\n  } else {\n    ViewComponent = GridView;\n  }\n\n  return (\n    <div className=\"App\">\n      {isConnected ? (\n        <>\n          <ViewComponent />\n          <ControlBar />\n        </>\n      ) : (\n        <JoinForm />\n      )}\n    </div>\n  );\n};\n","import { HMSPeer } from '@100mslive/hms-video-store';\nimport React from 'react';\nimport Peer from '../components/Peer';\n\ninterface IPeerSidePane {\n  peers: HMSPeer[];\n}\n\nconst PeerSidePane = ({ peers }: IPeerSidePane) => {\n  return (\n    <div className=\"peer-sidepane-list\">\n      {peers.map(peer => (\n        <>\n          <Peer key={peer.id} peer={peer} className=\"peer-video\" />\n        </>\n      ))}\n    </div>\n  );\n};\n\nexport default PeerSidePane;\n","import {\n  selectPeers,\n  selectSessionStore,\n  useHMSStore\n} from '@100mslive/react-sdk';\nimport React from 'react';\nimport Peer from '../components/Peer';\nimport PeerSidePane from './PeerSidePane';\n\nconst PresenterView = () => {\n  const peers = useHMSStore(selectPeers);\n  const presenter = useHMSStore(selectSessionStore('presenterId'));\n\n  return (\n    <div className=\"presenter-container-main\">\n      <div className=\"presenter-container\">\n        {presenter ? (\n          <>\n            <Peer peer={presenter} className=\"presenter-video\" />\n            <PeerSidePane\n              peers={peers.filter(peer => peer.id !== presenter.id)}\n            />\n          </>\n        ) : (\n          <div>Waiting...</div>\n        )}\n      </div>\n    </div>\n  );\n};\nexport default PresenterView;\n","export const threeCube = {\n  asset: {\n    version: '2.0',\n    generator: 'THREE.GLTFExporter'\n  },\n  scenes: [\n    {\n      name: 'Scene',\n      nodes: [0]\n    }\n  ],\n  scene: 0,\n  nodes: [\n    {\n      matrix: [\n        1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 2.5863874181621065,\n        -0.336502157380535, 0.39928251351405897, 1\n      ],\n      name: 'Box',\n      mesh: 0\n    }\n  ],\n  bufferViews: [\n    {\n      buffer: 0,\n      byteOffset: 0,\n      byteLength: 288,\n      target: 34962,\n      byteStride: 12\n    },\n    {\n      buffer: 0,\n      byteOffset: 288,\n      byteLength: 288,\n      target: 34962,\n      byteStride: 12\n    },\n    {\n      buffer: 0,\n      byteOffset: 576,\n      byteLength: 192,\n      target: 34962,\n      byteStride: 8\n    },\n    {\n      buffer: 0,\n      byteOffset: 768,\n      byteLength: 72,\n      target: 34963\n    }\n  ],\n  buffers: [\n    {\n      byteLength: 840,\n      uri: 'data:application/octet-stream;base64,AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAC/AAAAPwAAAL8AAAA/AAAAPwAAAL8AAAC/AAAAvwAAAD8AAAC/AAAAvwAAAD8AAAA/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAA/AAAAvwAAAD8AAAC/AAAAPwAAAD8AAAC/AAAAvwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAvwAAAL8AAAA/AAAAPwAAAL8AAAA/AAAAvwAAAL8AAAC/AAAAPwAAAL8AAAC/AAAAvwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAvwAAAL8AAAA/AAAAPwAAAL8AAAA/AAAAPwAAAD8AAAC/AAAAvwAAAD8AAAC/AAAAPwAAAL8AAAC/AAAAvwAAAL8AAAC/AACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAvwAAAAAAAAAAAACAvwAAAAAAAAAAAACAvwAAAAAAAAAAAACAvwAAAAAAAAAAAAAAAAAAgD8AAAAAAAAAAAAAgD8AAAAAAAAAAAAAgD8AAAAAAAAAAAAAgD8AAAAAAAAAAAAAgL8AAAAAAAAAAAAAgL8AAAAAAAAAAAAAgL8AAAAAAAAAAAAAgL8AAAAAAAAAAAAAAAAAAIA/AAAAAAAAAAAAAIA/AAAAAAAAAAAAAIA/AAAAAAAAAAAAAIA/AAAAAAAAAAAAAIC/AAAAAAAAAAAAAIC/AAAAAAAAAAAAAIC/AAAAAAAAAAAAAIC/AAAAAAAAgD8AAIA/AACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAgD8AAIA/AAAAAAAAAAAAAIA/AAAAAAAAAAAAAIA/AACAPwAAgD8AAAAAAAAAAAAAgD8AAAAAAAAAAAAAgD8AAIA/AACAPwAAAAAAAAAAAACAPwAAAAAAAAAAAACAPwAAgD8AAIA/AAAAAAAAAAAAAIA/AAAAAAAAAAAAAIA/AACAPwAAgD8AAAAAAAAAAAAAgD8AAAAAAAACAAEAAgADAAEABAAGAAUABgAHAAUACAAKAAkACgALAAkADAAOAA0ADgAPAA0AEAASABEAEgATABEAFAAWABUAFgAXABUA'\n    }\n  ],\n  accessors: [\n    {\n      bufferView: 0,\n      componentType: 5126,\n      count: 24,\n      max: [0.5, 0.5, 0.5],\n      min: [-0.5, -0.5, -0.5],\n      type: 'VEC3'\n    },\n    {\n      bufferView: 1,\n      componentType: 5126,\n      count: 24,\n      max: [1, 1, 1],\n      min: [-1, -1, -1],\n      type: 'VEC3'\n    },\n    {\n      bufferView: 2,\n      componentType: 5126,\n      count: 24,\n      max: [1, 1],\n      min: [0, 0],\n      type: 'VEC2'\n    },\n    {\n      bufferView: 3,\n      componentType: 5123,\n      count: 36,\n      max: [23],\n      min: [0],\n      type: 'SCALAR'\n    }\n  ],\n  materials: [\n    {\n      pbrMetallicRoughness: {\n        baseColorFactor: [0.7912979403281551, 0.11953842797895521, 0, 1],\n        metallicFactor: 0,\n        roughnessFactor: 0.9\n      },\n      extensions: {\n        KHR_materials_unlit: {}\n      }\n    }\n  ],\n  meshes: [\n    {\n      primitives: [\n        {\n          mode: 4,\n          attributes: {\n            POSITION: 0,\n            NORMAL: 1,\n            TEXCOORD_0: 2\n          },\n          indices: 3,\n          material: 0\n        }\n      ]\n    }\n  ],\n  extensionsUsed: ['KHR_materials_unlit']\n};\n","import { Token } from '@lumino/coreutils';\nimport { ISignal, Signal } from '@lumino/signaling';\n\nexport const EXTENSION_ID = 'jupyter.extensions.arpresent_plugin';\n\nexport const IArPresentRegistryToken = new Token<IModelRegistry>(EXTENSION_ID);\n\nexport interface IModelRegistry {\n  modelRegistry: Set<IModelRegistryData>;\n  modelRegistryChanged: ISignal<IModelRegistry, void>;\n  registerModel(data: IModelRegistryData): void;\n}\n\nexport interface IModelRegistryDataUrl {\n  name: string;\n  url: string;\n}\n\nexport interface IModelRegistryDataGltf {\n  name: string;\n  gltf: any;\n}\n\nexport type IModelRegistryData = IModelRegistryDataUrl | IModelRegistryDataGltf;\n\nexport class ModelManager implements IModelRegistry {\n  modelRegistry: Set<IModelRegistryData> = new Set<IModelRegistryData>();\n  modelRegistryChanged = new Signal<this, void>(this);\n\n  registerModel(data: IModelRegistryData): void {\n    this.modelRegistry.add(data);\n    this.modelRegistryChanged.emit();\n  }\n}\n","import { selectAppData } from '@100mslive/react-sdk';\nimport { ReactWidget } from '@jupyterlab/apputils';\nimport { Button, SidePanel, UseSignal } from '@jupyterlab/ui-components';\nimport { ISignal } from '@lumino/signaling';\nimport { Panel, Widget } from '@lumino/widgets';\nimport React, { useEffect, useState } from 'react';\nimport ArCube from '../arCube';\nimport { Icons } from '../components/Icons';\nimport ModelListItem from '../components/ModelListItem';\nimport { hmsActions, hmsStore } from '../hms';\nimport { arIcon } from '../icons';\nimport { IModelRegistry, IModelRegistryData } from '../registry';\n\n// https://github.khronos.org/glTF-Sample-Viewer-Release/assets/models/Models/Suzanne/glTF/Suzanne.gltf'\n// https://github.khronos.org/glTF-Sample-Viewer-Release/assets/models/Models/IridescenceAbalone/glTF/IridescenceAbalone.gltf\n\ninterface IModelInfoList {\n  modelList: Set<IModelRegistryData>;\n}\n\nconst SidebarComponent = ({ modelList }: IModelInfoList) => {\n  const [isDisabled, setIsDisabled] = useState(false);\n  const [isSecondScene, setIsSecondScene] = useState(false);\n  const [arCube, setArCube] = useState<ArCube | undefined>(undefined);\n  const [selected, setSelected] = useState<IModelRegistryData>();\n\n  useEffect(() => {\n    setArCube(hmsStore.getState(selectAppData('arCube')));\n\n    hmsActions.setAppData('modelRegistry', [...modelList]);\n    hmsStore.subscribe(updateModelLoadingState, selectAppData('canLoadModel'));\n    hmsStore.subscribe(updateArCube, selectAppData('arCube'));\n  }, []);\n\n  const updateArCube = () => {\n    setArCube(hmsStore.getState(selectAppData('arCube')));\n  };\n\n  const updateModelLoadingState = () => {\n    const canLoadModel = hmsStore.getState(selectAppData('canLoadModel'));\n    setIsDisabled(!canLoadModel);\n  };\n\n  const handleModelNameClick = (model: IModelRegistryData) => {\n    setSelected(model);\n    hmsActions.setAppData('selectedModel', model);\n  };\n\n  const handleModelSelectClick = (sceneNumber: number) => {\n    if (!arCube) {\n      setArCube(hmsStore.getState(selectAppData('arCube')));\n    }\n\n    if (!selected) {\n      console.log('Model must be selected');\n      return;\n    }\n\n    arCube?.changeModelInScene(sceneNumber, selected.name);\n\n    console.log('modelList', modelList);\n  };\n\n  const handleLoadSecondScene = () => {\n    if (isSecondScene) {\n      arCube?.disableSecondScene();\n    } else {\n      arCube?.enableSecondScene();\n    }\n    setIsSecondScene(!isSecondScene);\n  };\n\n  return (\n    <div className=\"sidebar-container\">\n      <div className=\"sidebar-description\">\n        Select a model from the list below\n      </div>\n      <div className=\"sidebar-list\">\n        {[...modelList].map(model => {\n          return (\n            <ModelListItem\n              model={model}\n              handleClick={handleModelNameClick}\n              className={\n                selected?.name === model.name ? 'model-list-item-selected' : ''\n              }\n            />\n          );\n        })}\n      </div>\n      <div className=\"sidebar-buttons\">\n        <Button onClick={() => handleModelSelectClick(0)}>\n          Set as first model\n        </Button>\n        <Button onClick={() => handleModelSelectClick(1)}>\n          Set as second model\n        </Button>\n      </div>\n      <Button\n        style={{ padding: '0.5rem' }}\n        onClick={handleLoadSecondScene}\n        disabled={isDisabled}\n      >\n        {isDisabled ? (\n          <Icons.spinner className=\"spinner\" />\n        ) : (\n          'Load second model'\n        )}\n      </Button>\n    </div>\n  );\n};\n\nexport class SidebarWidget extends SidePanel {\n  private _signal: ISignal<IModelRegistry, void>;\n  private _modelRegistry: Set<IModelRegistryData>;\n\n  constructor(\n    modelRegistry: Set<IModelRegistryData>,\n    modelRegistryChanged: ISignal<IModelRegistry, void>\n  ) {\n    super({ content: new Panel() });\n    this._modelRegistry = modelRegistry;\n    this._signal = modelRegistryChanged;\n\n    this.addClass('sidebar-widget');\n    this.title.icon = arIcon;\n    this.title.caption = 'Augmented reality';\n\n    const headerNode = document.createElement('h2');\n    headerNode.textContent = 'augmented reality';\n    this.header.addWidget(new Widget({ node: headerNode }));\n\n    const widget = ReactWidget.create(\n      <UseSignal signal={this._signal}>\n        {() => <SidebarComponent modelList={this._modelRegistry} />}\n      </UseSignal>\n    );\n    this.content.addWidget(widget);\n  }\n}\n"],"names":[],"sourceRoot":""}